# 🛡️ 포트 정보

MDRM 서버와 관리 대상 서버(Agent) 간의 원활한 통신을 위해 방화벽 설정이 필요합니다.

---

![MDRM 통신 포트 구성도](../assets/images/day1/port.png){: width="100%" }

## **주요 통신 포트 안내**

MDRM 솔루션 운영을 위한 기본 포트 구성은 다음과 같습니다. 해당 포트들은 고객사 보안 정책에 따라 설치 시 변경이 가능합니다.

### 사용자 ↔ MDRM 서버

| 통신 방향 | 사용 포트 | 프로토콜 | 용도 | 구분 |
| :--- | :--- | :---: | :--- | :---: |
| <span style="white-space: nowrap;">**사용자** → **MDRM 서버**</span> | `443` | TCP (HTTPS) | MDRM 서버 웹 콘솔 접속 | **필수** |

### MDRM 서버 ↔ GAM 에이전트 서버

| 통신 방향 | 사용 포트 | 프로토콜 | 용도 | 구분 |
| :--- | :--- | :---: | :--- | :---: |
| <span style="white-space: nowrap;">**MDRM 서버** ↔ **Agent**</span> | `443` | TCP (HTTPS) | GAM 에이전트 찾기 및 통신 | **필수** |
| <span style="white-space: nowrap;">**MDRM 서버** → **Agent**</span> | `20080` | TCP | 명령 전달 | **필수** |
| <span style="white-space: nowrap;">**MDRM 서버** → **Agent**</span> | `5001` | TCP | 실시간 로그 전송 | 권장 |
| <span style="white-space: nowrap;">**MDRM 서버** → **Agent**</span> | `5666` | TCP | 모니터링 데이터 수집 (Nagios) | 선택 |
| <span style="white-space: nowrap;">**MDRM 서버** → **Agent**</span> | `5985` / `22` | TCP | 패키지 배포 (WinRM/SSH) | 선택 |

!!! info "포트 용도 상세"
    - **443 (필수)**: 에이전트 자동 검색, 등록 및 기본 통신용 포트
    - **20080 (필수)**: MDRM 서버에서 에이전트로의 작업 명령 전달용 포트
    - **5001 (권장)**: **실시간 로그 수집** 및 모니터링 기능을 위한 포트
    - **5666**: Nagios 에이전트를 통한 모니터링 데이터 수집 시 필요
    - **5985/22**: Windows(WinRM) 또는 Linux(SSH)를 통한 자동 설치/배포 시 필요

---

## **방화벽 설정 예시 (Rocky Linux/RHEL 기준)**

서버 유형에 따라 필요한 포트를 오픈해 주십시오.

### **MDRM 서버**
```bash
# HTTPS (웹 접속 및 Agent 통신 수신)
firewall-cmd --permanent --add-port=443/tcp
firewall-cmd --reload
```

### **관리 대상 서버 (Agent)**
```bash
# MDRM 서버로부터의 명령 수신
firewall-cmd --permanent --add-port=20080/tcp
firewall-cmd --reload
```

!!! info "포트 변경 안내"
    상기 포트들은 기본값이며, 설치 스크립트 실행 시 인자값을 통해 다른 포트로 변경하여 운영할 수 있습니다.

---

<a href="../Docker_설치_가이드/" class="next-step-card">
    <span class="next-content">
        <span class="next-step-label">Next Step</span>
        <span class="next-step-title">🐳 Docker 또는 🦭 Podman 설치</span>
    </span>
    <span class="next-step-icon">→</span>
</a>
