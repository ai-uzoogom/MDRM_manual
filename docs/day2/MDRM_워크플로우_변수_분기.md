# 📋 변수 활용 및 조건 분기

워크플로우 내에서 데이터를 동적으로 관리하고 상황에 맞게 실행 흐름을 제어하는 방법을 다룹니다.

---

## 1. 변수의 종류와 특징

MDRM은 범위와 용도에 따라 세 가지 유형의 변수를 제공합니다.

| 종류 | 정의 및 범위 | 주요 특징 |
|:---|:---|:---|
| **글로벌 변수** | 모든 워크플로우 공유 | 데이터센터 단위 관리, 시스템 간 데이터 연계용 |
| **로컬 변수** | 특정 워크플로우 전용 | 해당 워크플로우 내에서만 유효, 실행 시 초기화 옵션 지원 |
| **매크로 변수** | 시스템 예약 변수 | `MDRM_NODE_IP`, `MDRM_TASK_ID` 등 시스템 정보를 자동 반환 |

### 변수 데이터 유형
*   **Text**: 일반 문자열 저장 (`{{변수명}}`으로 호출)
*   **Password**: 암호화된 비밀번호 저장 (입력 시 `*` 표시)
*   **System**: 등록된 시스템 자원 자체를 변수로 지정 (연결 서버 설정 시 사용)

---

## 2. 변수 활용 시나리오 (저장 및 사용)

### 변수에 값 저장하기 (Input)
1. **결과 처리**: 컴포넌트 실행 결과 메시지를 변수에 자동 저장.
2. **실행 시 필수 입력**: 워크플로우 시작 전 사용자로부터 동적인 값을 입력받음.
3. **링크 연동**: 부모 워크플로우의 실행 결과값을 하위(링크) 워크플로우 변수로 전달.

### 변수 값 사용하기 (Output)
*   **스크립트 내부**: 명령어 또는 스크립트 작성 시 `{{VAR1}}` 형태로 삽입하여 동적 실행.
*   **서버 설정**: System 유형 변수를 활용해 실행 대상 서버를 유연하게 변경.

---

## 3. 분기 컴포넌트 (Conditional Branching)

변수 값을 기준으로 다중 경로(Multi-path)를 설정하여 지능형 워크플로우를 구현합니다.

*   **조건 설정 (IF)**: 
    *   `변수명 = 값` : 정확히 일치할 때 진행
    *   `변수명 포함 값` : 특정 문자열이 포함될 때 진행
*   **기타 경로 (ELSE)**: 설정된 어떤 조건에도 해당하지 않을 경우 진행할 기본 경로 정의.
*   **우선순위**: 분기선에 표시된 조건문에 따라 순차적으로 판단하여 가장 먼저 부합하는 경로를 선택합니다.

---

## 4. 활용 예시: 서버 상태별 조치

1. [상태조회] 컴포넌트가 서버 상태를 확인하여 `status` 변수에 저장.
2. [분기] 컴포넌트가 `status` 값을 판단.
3. **IF `status=ONLINE`**: 정상 종료 프로세스로 진행.
4. **IF `status=OFFLINE`**: 장애 복구(Restart) 링크 컴포넌트 실행.

---

<a href="../MDRM_워크플로우_실행_모니터링/" class="next-step-card">
    <span class="next-content">
        <span class="next-step-label">Next Step</span>
        <span class="next-step-title">🚀 워크플로우 실행 및 모니터링</span>
    </span>
    <span class="next-step-icon">→</span>
</a>
